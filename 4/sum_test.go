package main

import (
	"strconv"
	"testing"
)

type testpair struct {
	values []string
	sum    string
}

var tests = []testpair{
	{[]string{"199", "1"}, "200"},
	{[]string{"1", "2"}, "3"},
	{[]string{
		"14159265358979323846264338327950288419716939937510582097494459230781640" +
			"628620899862803482534211706798214808651328230664709384460955058223172535940812848111" +
			"745028410270193852110555964462294895493038196442881097566593344612847564823378678316" +
			"527120190914564856692346034861045432664821339360726024914127372458700660631558817488" +
			"152092096282925409171536436789259036001133053054882046652138414695194151160943305727" +
			"036575959195309218611738193261179310511854807446237996274956735188575272489122793818" +
			"301194912983367336244065664308602139494639522473719070217986094370277053921717629317" +
			"675238467481846766940513200056812714526356082778577134275778960917363717872979323846" +
			"264338327950288419716939937510582097494459230781640628620899862803482534211706664709" +
			"384460955058223172535940005681271452635608277857713427577896091736371787297932384626" +
			"433832795028841971693993751058209749445923078164062862089986280348253421170666470938" +
			"4460955058223172535940005681271452635608277857713427577896091736371787297933424324324324",
		"6782354781636009341721641219924586315030286182974555706749838505494588586926995690927210" +
			"7975093029553211653449872027559602364806654991198818347977535663698074265425278625518184" +
			"1757467289097777279380008164706001614524919217321721477235014144197356854816136115735255" +
			"2133475741849468438523323907394143334547762416862518983569485562099219222184272550254256" +
			"8876717904946016534668049886272327917860857843838279679766814541009538837863609506800642" +
			"2512520511739298489608412848862694560424196528502221066118630674427862203919494504712371" +
			"3786960956364371917287467764657573962413890865832645995813390478027590099465764078951269" +
			"4683983525957098258226205224894077267194782684826014769909026401363944374553050682034962" +
			"5245174939965143142980919065925093722169646151570985838741059788595977297549893016175392" +
			"8468138268683868942774155991855925245953959431049972524680845987273644695848653836736222" +
			"6260991246080512438843904512441365497627807977156914359977001296160894416948685558484063" +
			"5342207222582848864815845602850"},
		"819828131753394172634807505271961515700198017672561391649928442857275264978908567720" +
			"755905093047363514264621012002582243117492676100494219908839183485118098192938355488193702" +
			"947317111912046732209761972593516977280458365345797369711021797309468558763961784682658715" +
			"561958028511595057245939650988555607179363248292567486531830077130884751472518970389793581" +
			"357539060790695895500965384107426130550090047815854068033905002048480564753477000618215617" +
			"6390598137608695711624162145803131490877564404040780677605081012246445761375907337663250913" +
			"2037362789390860772016852793545856537976001698425615751547216414194714453504039050766762103" +
			"0913740371871225886119502465186289491643427201974461183038818851351481764941933061581226174" +
			"14177101574440804216036926349076112156807046641918865279001207624909895396998108960582930425" +
			"799528857850943878893372389339341696940802210930946196404409616531425088350977526428765860014" +
			"5709833798115931336302944105083605451284414244552447344569012418531433943594370146798240169927174"},
}

func process(str0 string, str1 string) string {
	var num0, num1 int
	var result string
	var mind int
	for {
		num0 = getNextDigit(&str0)
		num1 = getNextDigit(&str1)
		sum, newMind := getSum(num0, num1, mind)
		mind = newMind
		result = strconv.Itoa(sum) + result
		if len(str0) == 0 && len(str1) == 0 && newMind == 0 {
			return result
		}
	}
}

func TestProcess(t *testing.T) {
	for _, pair := range tests {
		v := process(pair.values[0], pair.values[1])
		if v != pair.sum {
			t.Error(
				"For", pair.values,
				"expected", pair.sum,
				"got", v,
			)
		}
	}
}
